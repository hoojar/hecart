/*! jCountdown jQuery Plugin - v1.5.0 - 2013-09-21
* https://github.com/tomgrohl/jCountdown/
* Copyright (c) 2013 Tom Ellis; Licensed MIT */
(function(e){e.fn.countdown=function(t){var n=36e5,r=31557600,i=2629800,s=604800,o=86400,u=3600,a=60,f=1,l=/\d/g,c=function(t,n){var r=t.toString().match(l),i="";return e.each(r,function(e,t){t=Number(t),i+=""+n.digits[t]||""+t}),i},h=function(t){var n=t.template,r=e("<div>"),i=t.dom.$time.addClass(t.timeWrapClass),s=e("<"+t.textWrapElement+">").addClass(t.textWrapClass),o=t.timeSeparator,u=t.yearsLeft,a=t.monthsLeft,f=t.weeksLeft,l=t.daysLeft,h=t.hrsLeft,p=t.minsLeft,d=t.secLeft,v=!1,m=!1,g=!1,y=!1,b=!1,w=!1,E=!1,S=[],x=function(e,n,r){var u=i.clone().html(e+t.spaceCharacter).html();return u+=s.clone().html(n+t.spaceCharacter).html(),r&&(u+=s.clone().html(t.spaceCharacter+o+t.spaceCharacter).html()),u};t.omitZero&&(t.yearsAndMonths&&(t.yearsLeft||(v=!0),t.monthsLeft||(m=!0)),t.weeks&&(t.yearsAndMonths&&m&&!t.weeksLeft||!t.yearsAndMonths&&!t.weeksLeft)&&(g=!0),g&&!l&&(y=!0),y&&!h&&(b=!0),b&&!p&&(w=!0)),t.leadingZero&&(u<10&&(u="0"+u),a<10&&(a="0"+a),f<10&&(f="0"+f),l<10&&(l="0"+l),h<10&&(h="0"+h),p<10&&(p="0"+p),d<10&&(d="0"+d)),u=c(u,t),a=c(a,t),f=c(f,t),l=c(l,t),h=c(h,t),p=c(p,t),d=c(d,t);if(t.yearsAndMonths){if(!t.omitZero||!v)n=n.replace("%y",x(u,t.yearText,!0));!t.omitZero||!v&&a||!v&&!m?n=n.replace("%m",x(a,t.monthText,!0)):n=n.replace("%m","")}return t.weeks&&!g?n=n.replace("%w",x(f,t.weekText,!0)):n=n.replace("%w",""),y?n=n.replace("%d",""):n=n.replace("%d",x(l,t.dayText,!0)),b?n=n.replace("%h",""):n=n.replace("%h",x(h,t.hourText,!0)),w?n=n.replace("%i",""):n=n.replace("%i",x(p,t.minText,!0)),n=n.replace("%s",x(d,t.secText)),n},p=function(t){var n=e("<div>"),r=e("<"+t.timeWrapElement+">").addClass(t.timeWrapClass),i=e("<"+t.textWrapElement+">").addClass(t.textWrapClass),s=t.timeSeparator,o=t.yearsLeft,u=t.monthsLeft,a=t.weeksLeft,f=t.daysLeft,l=t.hrsLeft,p=t.minsLeft,d=t.secLeft,v=t.template,m=!!t.template,g=!1,y=!1,b=!1,w=!1,E=!1,S=!1,x=!1,T=[],N=function(e){T.push(function(){n.append(r.clone().html(e+t.spaceCharacter))})},C=function(e){T.push(function(){n.append(i.clone().html(e+t.spaceCharacter))})},k=function(){T.push(function(){n.append(i.clone().html(t.spaceCharacter+s+t.spaceCharacter))})},L=function(e,n,o){var u=r.clone().html(e+t.spaceCharacter).html();return u+=i.clone().html(n+t.spaceCharacter).html(),o&&(u+=i.clone().html(t.spaceCharacter+s+t.spaceCharacter).html()),u};if(t.template)return h(t);t.omitZero&&(t.yearsAndMonths&&(t.yearsLeft||(g=!0),t.monthsLeft||(y=!0)),t.weeks&&(t.yearsAndMonths&&y&&!t.weeksLeft||!t.yearsAndMonths&&!t.weeksLeft)&&(b=!0),b&&!f&&(w=!0),w&&!l&&(E=!0),E&&!p&&(S=!0)),t.leadingZero&&(o<10&&(o="0"+o),u<10&&(u="0"+u),a<10&&(a="0"+a),f<10&&(f="0"+f),l<10&&(l="0"+l),p<10&&(p="0"+p),d<10&&(d="0"+d)),o=c(o,t),u=c(u,t),a=c(a,t),f=c(f,t),l=c(l,t),p=c(p,t),d=c(d,t);if(t.yearsAndMonths){if(!t.omitZero||!g)N(o),C(t.yearText),k();if(!t.omitZero||!g&&u||!g&&!y)N(u),C(t.monthText),k()}return t.weeks&&!b&&(N(a),C(t.weekText),k()),w||(N(f),C(t.dayText),k()),E||(N(l),C(t.hourText),k()),S||(N(p),C(t.minText),k()),N(d),C(t.secText),t.isRTL===!0&&T.reverse(),e.each(T,function(e,t){t()}),v=n.html(),v},d=function(e){var t=new Date,n=e.data("jcdData");return n?(n.offset!==null&&(t=v(n.offset)),t.setMilliseconds(0),t):new Date},v=function(e){var t,r,i,s=new Date;return e!==null&&(t=e*n,i=s.getTime()- -s.getTimezoneOffset()/60*n+t,r=s.setTime(i)),new Date(r)},m=function(){var e=this,t,n,l,c,h=0,v=0,m=0,g=0,y=0,b=0,w=0,E="",S,x=!1,T=!1,N=!1,C=!1,k=!1,L=!1,A=!1,O=function(e){var t;return t=Math.floor(S/e),S-=t*e,t},M=e.data("jcdData");if(!M)return!1;t=M.htmlTemplate,n=d(e),M.serverDiff!==null?l=new Date(M.serverDiff+M.clientdateNow.getTime()):l=M.dateObj,l.setMilliseconds(0),c=M.direction==="down"?l.getTime()-n.getTime():n.getTime()-l.getTime(),S=Math.round(c/1e3),g=O(o),y=O(u),b=O(a),w=O(f),M.yearsAndMonths&&(S+=g*o,h=O(r),v=O(i),g=O(o)),M.weeks&&(S+=g*o,m=O(s),g=O(o));if(M.hoursOnly||M.minsOnly||M.secsOnly)M.yearsAndMonths&&(S+=h*r,S+=v*i,h=v=0),M.weeks&&(S+=m*s,m=0);M.hoursOnly&&(S+=g*o,S+=y*u,y=O(u)),M.minsOnly&&(S+=g*o,g=0,S+=y*u,y=0,S+=b*a,b=O(a)),M.secsOnly&&(S+=g*o,g=0,S+=y*u,y=0,S+=b*a,b=0,S+=w,w=O(f)),M.yearsLeft=h,M.monthsLeft=v,M.weeksLeft=m,M.daysLeft=g,M.hrsLeft=y,M.minsLeft=b,M.secLeft=w,e.data("jcdData",M),M.direction==="down"&&(n<l||M.minus)||M.direction==="up"&&(l<n||M.minus)?E=p(M):(M.yearsLeft=M.monthsLeft=M.weeksLeft=M.daysLeft=M.hrsLeft=M.minsLeft=M.secLeft=0,E=p(M),M.hasCompleted=!0),e.html(E).triggerMulti("change.jcdevt,countChange",[M]),M.hasCompleted&&(e.triggerMulti("complete.jcdevt,countComplete"),clearInterval(M.timer)),e.data("jcdData",M)},g={init:function(t){var n=e.extend({},e.fn.countdown.defaults,t),r=null,i,s;return this.each(function(){var r=e(this),o={},u;r.data("jcdData")&&(r.countdown("changeSettings",t,!0),n=r.data("jcdData"));if(n.date===null&&n.dataAttr===null)return e.error("No Date passed to jCountdown. date option is required."),!0;n.date?s=n.date:s=r.data(n.dataAttr),i=new Date(s),i.toString()==="Invalid Date"&&e.error("Invalid Date passed to jCountdown: "+s),n.onStart&&r.on("start.jcdevt",n.onStart),n.onChange&&r.on("change.jcdevt",n.onChange),n.onComplete&&r.on("complete.jcdevt",n.onComplete),n.onPause&&r.on("pause.jcdevt",n.onPause),n.onResume&&r.on("resume.jcdevt",n.onResume),n.onLocaleChange&&r.on("locale.jcdevt",n.onLocaleChange),o=e.extend({},n),o.dom={},o.dom.$time=e("<"+o.timeWrapElement+">").addClass(o.timeWrapClass),o.dom.$text=e("<"+o.textWrapElement+">").addClass(o.textWrapClass),o.clientdateNow=new Date,o.clientdateNow.setMilliseconds(0),o.originalHTML=r.html(),o.dateObj=new Date(s),o.dateObj.setMilliseconds(0),o.hasCompleted=!1,o.timer=0,o.yearsLeft=o.monthsLeft=o.weeksLeft=o.daysLeft=o.hrsLeft=o.minsLeft=o.secLeft=0,o.difference=null,u=e.proxy(m,r),o.timer=setInterval(u,o.updateTime),r.data("jcdData",o).triggerMulti("start.jcdevt,countStart",[o]),u()})},changeSettings:function(t,n){return this.each(function(){var r=e(this),i,s,o=e.proxy(m,r);if(!r.data("jcdData"))return!0;i=e.extend({},r.data("jcdData"),t),t.hasOwnProperty("date")&&(s=new Date(t.date),s.toString()==="Invalid Date"&&e.error("Invalid Date passed to jCountdown: "+t.date)),i.completed=!1,i.dateObj=new Date(t.date),clearInterval(i.timer),r.off(".jcdevt").data("jcdData",i),n||(i.onChange&&r.on("change.jcdevt",i.onChange),i.onComplete&&r.on("complete.jcdevt",i.onComplete),i.onPause&&r.on("pause.jcdevt",i.onPause),i.onResume&&r.on("resume.jcdevt",i.onResume),i.timer=setInterval(o,i.updateTime),r.data("jcdData",i),o()),i=null})},resume:function(){return this.each(function(){var t=e(this),n=t.data("jcdData"),r=e.proxy(m,t);if(!n)return!0;t.data("jcdData",n).triggerMulti("resume.jcdevt,countResume",[n]);if(!n.hasCompleted){n.timer=setInterval(r,n.updateTime);if(n.stopwatch&&n.direction==="up"){var i=d(t).getTime()-n.pausedAt.getTime(),s=new Date;s.setTime(n.dateObj.getTime()+i),n.dateObj=s}r()}})},pause:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;n.stopwatch&&(n.pausedAt=d(t)),clearInterval(n.timer),t.data("jcdData",n).triggerMulti("pause.jcdevt,countPause",[n])})},complete:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;clearInterval(n.timer),n.hasCompleted=!0,t.data("jcdData",n).triggerMulti("complete.jcdevt,countComplete",[n])})},destroy:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;clearInterval(n.timer),t.off(".jcdevt").removeData("jcdData").html(n.originalHTML)})},getSettings:function(t){var n=e(this),r=n.data("jcdData");return t&&r?r.hasOwnProperty(t)?r[t]:undefined:r},changeLocale:function(t){var n=e(this),r=n.data("jcdData");return e.fn.countdown.locale[t]?(e.extend(r,e.fn.countdown.locale[t]),n.data("jcdData",r).triggerMulti("locale.jcdevt,localeChange",[r]),!0):(e.error("Locale '"+t+"' does not exist"),!1)}};if(g[t])return g[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return g.init.apply(this,arguments);e.error("Method "+t+" does not exist in the jCountdown Plugin")},e.fn.countdown.defaults={date:null,dataAttr:null,updateTime:1e3,yearText:"years",monthText:"months",weekText:"weeks",dayText:"days",hourText:"hours",minText:"mins",secText:"sec",digits:[0,1,2,3,4,5,6,7,8,9],timeWrapElement:"span",textWrapElement:"span",timeWrapClass:"",textWrapClass:"cd-time",timeSeparator:"",isRTL:!1,minus:!1,onStart:null,onChange:null,onComplete:null,onResume:null,onPause:null,onLocaleChange:null,leadingZero:!1,offset:null,serverDiff:null,spaceCharacter:" ",hoursOnly:!1,minsOnly:!1,secsOnly:!1,weeks:!1,hours:!1,yearsAndMonths:!1,direction:"down",stopwatch:!1,omitZero:!1,template:null},e.fn.countdown.locale=[],e.fn.triggerMulti=function(t,n){var r=t.split(",");return this.each(function(){var t=e(this);for(var i=0;i<r.length;i++)t.trigger(r[i],n)})}})(jQuery);